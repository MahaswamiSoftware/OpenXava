<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <title>Modificar código de OpenXava</title>
    <link rel="stylesheet" href="static/style.css" type="text/css">
  </head>
  <body>
    <div class="wiki" id="content_view" style="display: block;">
      <h1 id="toc0"> <span id="breadcrumbs"> <span id="openxava"> <a href="https://www.openxava.org/">
              <span>o</span>pen<span>x</span>ava </a> </span> / <a href="index_es.html">documentación</a>
          / </span> Modificar código de OpenXava</h1>
      Puedes modificar el código de OpenXava para adaptarlo a tus necesidades,
      arreglar algún fallo, añadir nuevas características, etc.</div>
    <div class="wiki" style="display: block;">
      <h2 id="toc1">Desde v7.0</h2>
      <div class="wiki" style="display: block;">El código de OpenXava ya no se
        incluye en la distribución, now you have to get it from <a href="https://github.com/openxava/openxava">OpenXava
          GitHub repository</a>. The code of OpenXava framework is in the
        project <i>openxava</i> inside the repository:</div>
      <img src="files/openxava-in-github_en.png" alt="">
      <div class="wiki" style="display: block;">You can modify, build and
        install it using Git, Maven and your favorite IDE. If you're not used to
        Git and Maven, we present here a detailed guide to modify OpenXava code
        for your application using OpenXava Studio.</div>
      <div class="wiki" style="display: block;">
        <h3>Dowload code from GitHub</h3>
        <p>First go to the <a href="https://github.com/openxava/openxava">OpenXava
            page in GitHub</a> en copy the repository URL:</p>
        <img src="files/copy-openxava-repository-url_en.png" alt="">
        <p>Then open the Git perspective in OpenXava Studio, for that click on
          the button on right top part:</p>
        <img src="files/add-perspective-eclipse.png" alt=""></div>
      <div class="wiki" style="display: block;">It shows a dialog, choose the
        Git perspective:</div>
      <div class="wiki" style="display: block;"><img src="files/choose-git-perspective-eclipse.png"
          alt=""><br>
        <p>In Git perspective click on <i>Clone a Git repository</i>:</p>
        <img src="files/clone-git-repository-option-eclipse.png" alt="">
        <p>Given that you have copied OpenXava repository the URI is
          automatically filled, just click on <i>Next</i>:</p>
        <img src="files/clone-git-repository-step1-eclipse.png" alt="">
        <p>It shows all the branches, just click on <i>Next</i> again:</p>
        <img src="files/clone-git-repository-step2-eclipse.png" alt="">
        <p>Finally click on <i>Finish</i>:</p>
        <img src="files/clone-git-repository-step3-eclipse.png" alt="">
        <p>Now be patient while the repository code is downloaded from GitHub:</p>
        <img src="files/progress-importing-repository-eclipse.png" alt="">
        <p>After it you have the <i>openxava </i>repository listed in left
          side of OpenXava Studio:</p>
        <img src="files/openxava-repository-git-perspective-eclipse.png" alt="">
        <p>Congratulation the OpenXava repository is downloaded in your computer
          and configured in OpenXava Studio. The next step to import the <i>openxava</i>
          project into your workspace.</p>
        <h3>Import openxava into workspace</h3>
        <p>First, go back to Java perspective, to that click on the
          corresponding button on top right side in OpenXava Studio:</p>
        <img src="files/change-to-java-perspective-eclipse.png" alt="">
        <p>To import the openxava project click on <i>File &gt; Import...</i>:
        </p>
        <img src="files/file-import-eclipse.png" alt="">
        <p>Now select <i>Git &gt; Projects from Git</i> and click on <i>Next</i>:</p>
        <img src="files/import-step1-eclipse.png" alt="">
        <p>Choose <i>Existing local repository</i> and click on <i>Next</i>:</p>
        <img src="files/import-step2-eclipse.png" alt="">
        <p>Select the <i>openxava</i> repository and click on <i>Next</i>:</p>
        <img src="files/import-step3-eclipse.png" alt="">
        <p>Select the folder <i>openxava</i> and click on <i>Next</i>:</p>
        <img src="files/import-step4-eclipse.png" alt="">
        <p>Make sure <i>openxava</i> is checked in click on <i>Finish</i>:</p>
        <img src="files/import-step5-eclipse.png" alt="">
        <p>Finally the <i>openxava</i> project with all its code is in your
          workspace.</p>
        <img src="files/openxava-project-in-workspace-eclipse.png" alt="">
        <p>Now you can modify the openxava code at your taste.</p>
        <h3>Modify OpenXava code</h3>
        <p>First, make sure that the version in <i>openxava/pom.xml</i> is a
          SNAPSHOT. Open the <i>pom.xml</i> inside the <i>openxava</i>
          project, and verify the version:</p>
        <img src="files/openxava-pom-snapshot-version-eclipse.png" alt="">
        <p>If you're using the master branch surely the version will be an
          SNAPSHOT, if not modify it adding the -SNAPSHOT suffix. It means that
          is a working version, not with fixed features but ready to be
          modified.</p>
        <p>Now, it's the moment to modify the code. For example, edit the <i>NewAction.java</i>
          code and add a print, like this:</p>
        <img src="files/modifying-new-action.png" alt="">
        <p>Now make a <i>mvn install</i> on <i>openxava</i>, in this way:</p>
        <img src="files/openxava-maven-install-eclipse.png" alt="">
        <p>This time it's not needed to do a <i>mvn clean</i> because we have
          just downloaded the code and <i>target</i> is empty, but if you get
          new code from GitHub (with a pull)&nbsp; you should do a <i>mvn clean</i>
          too.</p>
        <p>Now, go to your project, edit the <i>pom.xml</i> and put the <i>openxava.version</i>
          property to the value of the OpenXava version you have in your
          workspace:</p>
        <img src="files/invoicing-pom-update-to-snapshot.png" alt="">
        <p>This is important, otherwise you project will not use the openxava
          you have modified, but the official version from Maven Central.</p>
        <p>Now do a <i>mvn clean</i> on your project:</p>
        <img src="files/invoicing-maven-clean.png" alt="">
        <p>And then a <i>mvn install</i> on your project:</p>
        <img src="files/invoicing-maven-install.png" alt="">
        <p>Congrutalions! Your project is ready to run with your modified
          OpenXava. Try it.</p>
        <h3>Shorten modification cycle</h3>
        <p>The above steps are for the very first modification. From now on, the
          next modifications can be easy, just three steps:</p>
        <ol>
          <li>Modify openxava code.</li>
          <li>Do a mvn install on openxava.</li>
          <li>Do a mvn war:exploded in your project. For this you can use Run As
            &gt; Build Maven ...</li>
        </ol>
        <p>Even more, if you start your application in debug mode, clicking on
          the bug:</p>
        <img src="files/debug-button-eclipse.png" alt="">
        <p>In this way you can modify the code in openxava and see the result
          instantly, even without relaunching your application or reload the
          browser. Just like magic.</p>
        <h3>Branches</h3>
        <p>In the above example we have modified directly the master branch, not
          a problem at all because you have no rights to do a push against the
          OpenXava repository. However, you can make a more advanced use of
          branches. As a minimum, you should create a branch before doing any
          change and do the change in your own branch. After the change is
          complete and works nicely, you can merge the code with master.</p>
        If you want to contribute code to OpenXava, you should create an account
        in GitHub, then create a clone of the openxava repository in your
        account. Follow the above steps importing the code from your own
        repository instead of from openxava/openxava. In this way, you can
        create a branch, do a push, and create a PR against the original
        OpenXava repository, where it could be approved and included in OpenXava
        for the next official release.</div>
      <h2 id="toc1">Desde v6.4</h2>
      <i> Has de definir OpenXava.buildOpenXava (o OpenXava.buildAddons) en
        External Tools de Eclipse (OpenXava Studio). Para aprender como ejecutar
        o definir tareas Ant en Eclipse <a href="ant-from-eclipse_en.html">sigue
          estas instrucciones</a>.</i>
      <div class="wiki" style="display: block;"><i><b></b></i></div>
    </div>
    <div class="wiki" style="display: block;"><i><b>Necesitas un JDK para
          ejecutar las tareas Ant</b>. En Eclipse ve a External Tools &gt;
        OpenXava.buildOpenXava (o buildAddons) &gt; JRE y escoge un JDK. A veces
        puede fallar si el tools.jar en el classpath no coincide con el JDK
        usado.</i>
      <div class="wiki" style="display: block;"><i>Si tienes <b>problemas</b>
          compilando <b>con acentos</b> ve a External Tools &gt;
          OpenXava.buildOPenxava (o buildAddons) &gt; Common &gt; Encoding : <b>ISO-8859-1</b>
          (no es necesario desde v6.5.2)<br>
        </i></div>
      <div class="wiki" style="display: block;"></div>
    </div>
    <div class="wiki" style="display: block;"><br>
    </div>
    <div class="wiki" style="display: block;"> Para modificar el código Java,
      XML o archivos i18n de OpenXava:</div>
    <div class="wiki" style="display: block;">
      <ul>
        <li>Modifica el código en <i>OpenXava/src</i>, <i>OpenXava/xava</i> o
          <i>OpenXava/i18n</i>. Estas no son carpetas de código fuente para
          Eclipse, por lo que el Eclipse no las compila.</li>
        <li>Ejecuta la tarea Ant <i>buildOpenXava</i> de <i>OpenXava/build.xml</i>.
          Esto compila el código Java de OpenXava y crea <i>openxava.jar</i>.</li>
        <li>Refresca el proyecto OpenXava en Eclipse (F5).</li>
        <li>Ejecuta la tarea Ant <i>actualizarOX</i> del <i>build.xml</i> de
          tu propio proyecto. Esto copia el nuevo <i>openxava.jar</i> a tu
          proyecto.</li>
        <li>Refresca tu propio proyecto en Eclipse (F5).</li>
      </ul>
      <p>Para modificar el código Java o XML de Addons:</p>
      <ul>
        <li>Modifica el código <i>Addon/src</i> o <i>Addons/xava</i>. Estas no
          son carpetas de código fuente para Eclipse, por lo que el Eclipse no
          las compila.</li>
        <li>Ejecuta la tarea Ant <i>buildAddons</i> en <i>OpenXava/build.xml</i>.
          Esto compila el código Java de Addons y copia su código XML.</li>
        <li>Refresca el proyecto Addons en Eclipse (F5).<br>
        </li>
        <li>Ejecuta la tarea Ant <i>actualizarOX</i> del <i>build.xml</i> de
          tu propio proyecto. </li>
        <li>Refresca tu propio proyecto en Eclipse (F5).</li>
      </ul>
      <p>Para modificar JSP/HTML/JavaScript/CSS:</p>
      <ul>
        <li>Modifica el código en <i>OpenXava/web</i>.<br>
        </li>
        <li>Ejecuta la tarea Ant <i>actualizarOX</i> del <i>build.xml</i> de
          tu propio proyecto. Esto copia todos los recursos web a tu proyecto.</li>
      </ul>
      <p></p>
      Desde v6.4 aunque todavía puedes navegar al código OpenXava desde tu
      propio código dentro de Eclipse, no puedes editar el código directamente,
      es de solo lectura. Por tanto, has de buscar la clase en cuestión en <i>OpenXava/src</i>
      tu mismo, modificarla y seguir los pasos de arriba.<br>
      <h2 id="toc2">Hasta v6.3.2</h2>
      Para modificar el código Java, XML o archivos i18n de OpenXava:
      <ul>
        <li>Modifica el código en <i>OpenXava/src</i>, <i>OpenXava/xava</i> o
          <i>OpenXava/i18n</i>. </li>
        <li>Pulsa el botón <i>Build All</i> o Ctrl-B.</li>
        <li>Ejecuta la tarea Ant <i>actualizarOX</i> del <i>build.xml</i> de
          tu propio proyecto. Esto crea un nuevo <i>openxava.jar</i> en tu
          proyecto.</li>
        <li>Refresca tu propio proyecto en Eclipse (F5).</li>
      </ul>
      <p>Para modificar el código Java o XML de Addons:</p>
      <ul>
        <li>Modifica el código en <i>Addon/src</i> o <i>Addons/xava</i>. </li>
        <li>Pulsa el botón <i>Build All</i> o Ctrl-B.</li>
        <li>Ejecuta la tarea Ant <i>actualizarOX</i> del <i>build.xml</i> de
          tu propio proyecto. </li>
        <li>Refresca tu propio proyecto en Eclipse (F5).</li>
      </ul>
      <p>Para modificar JSP/HTML/JavaScript/CSS:</p>
      <ul>
        <li>Modifica el código en <i>OpenXava/web</i>.<br>
        </li>
        <li>Ejecuta la tarea Ant <i>actualizarOX</i> del <i>build.xml</i> de
          tu propio proyecto. Esto copia todos los recursos web a tu proyecto.</li>
      </ul>
      <p></p>
    </div>
  </body>
</html>
