<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <title>Configuración para MySQL - OpenXava</title>
    <link rel="stylesheet" href="static/style.css" type="text/css">
    <link rel="stylesheet" href="highlight/highlight.css">
    <script src="highlight/highlight.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </head>
  <body>
    <div class="wiki" style="display: block;">
      <h1 id="toc0"> <span id="breadcrumbs"> <span id="openxava"> <a
              href="https://www.openxava.org/"> <span>o</span>pen<span>x</span>ava </a> </span> / <a
            href="index_es.html">documentación</a> / </span> Configuración para LeanXcale</h1>
      <div class="wiki" style="display: block;">Configurar tu aplicación OpenXava contra LeanXcale es muy fácil, básicamente has de añadir unas dependencias a tu proyecto y definir correctamente la base de datos. No necesitas tocar el código de tu aplicación.</div>
      <div class="wiki" style="display: block;">Asumimos que ya tienes al menos una cuenta trial en LeanXcale funcionando.<br>
        <h2 id="toc1">Añadir dependencias en el proyecto</h2>
        <p>Edita el archivo <i>pom.xml</i> en la raíz de tu proyecto, allí añade las siguientes dependencias dentro de la parte <i>&lt;dependencies&gt;</i>:</p>
        <pre><code class="xml">&lt;dependency&gt;
	&lt;groupId&gt;com.leanxcale&lt;/groupId&gt;
	&lt;artifactId&gt;qe-driver&lt;/artifactId&gt;
	&lt;version&gt;1.9.4&lt;/version&gt;
&lt;/dependency&gt;

&lt;dependency&gt;
	&lt;groupId&gt;com.leanxcale.connectors&lt;/groupId&gt;
	&lt;artifactId&gt;hibernate-connector&lt;/artifactId&gt;
	&lt;version&gt;1.9.4&lt;/version&gt;
&lt;/dependency&gt;<br></code></pre>
        En el mismo archivo archivo añade el siguiente repositorio en &lt;repositories&gt;:</div>
      <div class="wiki" style="display: block;">
        <pre><code class="xml">&lt;repository&gt;
	&lt;id&gt;maven-releases&lt;/id&gt;
	&lt;url&gt;https://nexus.leanxcale.com/repository/maven-releases&lt;/url&gt;
&lt;/repository&gt;</code></pre>
      </div>
      <div class="wiki" style="display: block;"> </div>
      <div class="wiki" style="display: block;">
        <h2 id="toc1">Ajustar la definición de la fuente de datos</h2>
        Edita <i>src/main/webapp/META-INF/context.xml</i> de tu proyecto y ajusta la definición de tu fuente de datos para que apunte a LeanXcale;</div>
      <div class="wiki" style="display: block;">
        <pre><code class="xml">&lt;Resource name="jdbc/leanxcaleDS" auth="Container"
	type="javax.sql.DataSource" maxTotal="20" maxIdle="5"
	maxWaitMillis="10000" username="app" password="app"
	driverClassName="com.leanxcale.client.Driver"
	url="jdbc:leanxcale://a5357d898f9318f2a75b.lxc-db.com:1522/db" /&gt;
</code></pre> </div>
      <div class="wiki" style="display: block;">Obviamente, debes usar tu usuario, contraseña y url. No olvides comentar o quitar la fuente de datos para HSQLDB (incluida por defecto al crear un nuevo proyecto OpenXava), sólo una fuente de datos (con el mismo nombre) debería estar activa.</div>
      <div class="wiki" style="display: block;">
        <h2>Reconstruir proyecto</h2>
        <p>Después de los cambios has de reconstruir (rebuild) tu proyecto. En OpenXava Studio pulsa con el botón derecho del ratón en tu proyecto y escoge <i>Run As &gt; Maven install</i>, así:</p>
        <img src="files/run-as-maven-install.png" alt="">
        <p>O si tienes Maven instalado en tu ordenador y prefieres usar la línea de órdenes:</p>
        <pre><code class="bash">$ cd miaplicacion
$ mvn install
</code></pre>
        <p>Nota de optimización: En lugar de <i>mvn install</i>, que hace un <i>build</i> de Maven completo, puedes usar <i>mvn war:exploded</i>, suficiente para aplicar los cambios de arriba para desarrollo. Puedes llamar a <i>mvn war:exploded</i> desde el OpenXava Studio con <i>Run As &gt; Maven build...</i> y tecleando <i>war:exploded</i> para <i>goal</i>.</p>
        <h2>Ejecutar aplicacion</h2>
        <p>Ejecuta tu aplicación, debería funcionar bien contra tu base de datos LeanXcale. Si fallara, verifica que tu base de datos está funcionando, que el usuario, la contraseña y el url son correctos. Verifica también que el usuario tiene privilegios para crear bases de datos y tablas (si quieres usar la generación automática de esquema de OpenXava, no necesario si las tablas ya existen).</p>
        <p>Si sigue fallando pregúntanos en el <a href="https://sourceforge.net/p/openxava/discussion/437013/">foro de ayuda de OpenXava</a>. Incluye el contenido de tu <i>persistence.xml</i>, <i>context.xml</i> (quita las contraseñas) y sobre todo la traza generada, puedes encontrar la traza en la pestaña <i>Console</i> del OpenXava Studio.</p>
      </div>
    </div>
  </body>
</html>
